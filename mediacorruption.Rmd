---
title: "Media corruption"
output:
  html_notebook: default
  html_document: default

---

Dưới đây là kết quả scraping web vnexpress.net (5 chuyên mục bao gồm pháp luật, thời sự, kinh doanh, giáo dục và cộng đồng). Codebook của dự án media corruption được tham khảo để theo dõi sự thay đổi trong thông tin về tham nhũng trên báo mạng.

```{r include=FALSE}
library(readr)
library(stringr)
library(lubridate)
dir = "D:/Webscrape/webscrape"

# read the data
setwd(paste(dir,"/vnexpress/finalData",sep=""))
text = read_csv("vnexpress.csv")
colnames(text) = c("link", "title", "date", "content", "category")
text$date = as_date(as.integer(text$date))
cm = unique(text$category)

```

Ví dụ 1 bài báo:
```{r}
message("Link: ",text$link[1])
cat("\nTieu de: ", text$title[1], "\n\n")
example = text$content[1]
example
```

Tách lấy tiêu đề và 2 đoạn văn đầu:
```{r warning=FALSE}
# Function de xac dinh 2 doan van dau
first2_real_text = function(string) {
  string = str_split(string, "\r\r\n\t")[[1]]
  string = string[nchar(string)>1]
  string = string[1:2]
  return(string)
}
# Thuc hien
two_para = lapply(text$content,FUN = first2_real_text) %>% lapply(FUN=tolower)

```

Search các bài có từ "tham nhũng" hoặc "hối lộ" trong: (1) Tiêu đề; hoặc (2) 2 đoạn văn đầu (đoạn đầu thường là intro của bài báo).

```{r}
# Khai bao tu khoa
key_cor = c("tham nhũng", "hối lộ")

# Xac dinh cac bai co tu khoa trong tieu de
title = tolower(text$title)
title_key = str_count(title, paste(key_cor,collapse="|"))

# Xac dinh cac bai co tu khoa trong 2 doan van dau
para_key = str_count(two_para, paste(key_cor,collapse="|"))

# Tong hop ket qua 
contain_key = title_key + para_key
article_cor = text[which(contain_key>0),]
article_cor$title


```



Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.
When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).
